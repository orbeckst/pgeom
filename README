
pgeom
=====

Copyright (c) 2000-2010 Oliver Beckstein <oliver.beckstein@bioch.ox.ac.uk>
Published under the GNU Public Licence, version 3 or any higher one.

The code in the directory ``nr`` is from Numerical Recipes and is not
free. 


Overview
--------

*pgeom* is simple C code to generate model pores. Pores are built
from concentric rings of atomic spheres. A pore is defined by its
external radius (the maximum outer radius of the whole assembly), and
the lengths and radii of the mout and pore regions.

The top mouth region is taken to be the mirror image of the bottom
mouth region, which sandwich the pore region. Each region is defined
by one length and one radius. The mout radius is linearly decreased to
match up with the pore radius. With R_M >= R_P this yields a funnel or
hour glass shape. 

The code acquired a second layer of crud (which is thankfully not
activated by default), which was an experiment in calculating
analytical pore volumes (see Appendix B of my thesis
http://sbcb.bioch.ox.ac.uk/oliver/download/Thesis/OB_thesis_2sided_v3.pdf
). Ignore it is my advice. If you must know: It takes the generated
structure and treats each atom as a CH4 van der Waals united atom (in
the Gromacs force field) and then tries to calculate (essentially) the
canonical partition function for a single water molecule in this
external potential.


Installation
------------

Set BIN_DIR in the Makefile. 

   cd pgeom
   make
   make install

You can also compile a double precision version with -DDOUBLE (or
uncomment the 'DOUBLE := yes' in the Makefile) but that is only useful
for the pore volume stuff.

It will install:

- pgeom (some stuff has been moved in a small library that is also
  installed)

- numerical recipes routines (in directory ./nr) are used for pore
  volume stuff but required for compilation nevertheless; they should be
  compiled automatically
   

Usage
-----

### Hydrophobic pores ###

To generate my standard model pores (the ones used in my papers), the
commandline looks as follows (snipped from my master Makefile):

  RADIUS  := varies from 1.5 to R_INNER
  R_OUTER := 18
  R_INNER := 10
  L_PORE  := 8
  L_MOUTH := 4

  pgeom -v -R $(R_OUTER) -P $(RADIUS)  $(L_PORE) 
           -M $(R_INNER) $(L_MOUTH) \
        -x -o pore.pdb -s pore.itp

The benchmark pore of radius 5.5 Angstrom (right at the switching
transition):

  ./pgeom -v -R 18 -P 5.5 8 -M 10 4 -x -o pore.pdb -s pore.itp

Radii are taken to be 'solvent accessible radii', ie the centre of the
wall atom lies on a circle of radius R+rA where rA is the van der
Waals radius of the wall atom (~1.95 A for CH4).

It is also possible to keep all the arguments in a file (say,
pore.txt) and run

  pgeom -f pore.txt -o pore.pdb -s pore.itp

In this case the input file would look like

 # example for a 5.5 A hydrophobic pore
 # (values are white-space separated)
 RADIUS 18

 # R1, R2: radii at top/bottom; L: length
 #      R1     R2   L
 MOUTH  10     5.5  4
 PORE    5.5   5.5  8
 MOUTH   5.5  10    4

The pore looks like this:

  *****    |     upper MOUTH
  ******** |     central PORE region
  ******** |
  *****    |     lower MOUTH



After that the pore is embedded into a slab of dummy atoms by a series
of gromacs commands and solvated with water (and ions if desired). I
do this in a Makefile; email me and I will send it to you. And older
version of all the necessary files is available at
http://sbcb.bioch.ox.ac.uk/oliver/download/HyGate/Readme.html 


### Hydrophilic pores ###

I just added the appropriate charges to the itp file; the dipole
moments were taken to mimick the peptide backbone dipole moment. At a
atomic distance of 4A this requires a charge of +/- 0.38e. A
semi-automatic approach is taken by Scripts/porecharger.pl which takes
a list of atom numbers (alternating between positively and negatively
charged ones) and the charge and changes the itp file accordingly. You
still need to write down the list of atoms by using eg rasmol or vmd
to select the atoms.


Bugs
----

* The program can seg-fault if the pore is too big (in my defence:
  this was my first C-program ever and I only later learned about
  dynamic memory allocation...). Should be fixed eventually...

